# MuMuAINovel ğŸ“šâœ¨

<div align="center">

![Version](https://img.shields.io/badge/version-1.2.5-blue.svg)
![Python](https://img.shields.io/badge/python-3.11-blue.svg)
![FastAPI](https://img.shields.io/badge/FastAPI-0.109.0-green.svg)
![React](https://img.shields.io/badge/react-18.3.1-blue.svg)
![License](https://img.shields.io/badge/license-GPL%20v3-blue.svg)

**åŸºäº AI çš„æ™ºèƒ½å°è¯´åˆ›ä½œåŠ©æ‰‹**

[ç‰¹æ€§](#-ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [é…ç½®è¯´æ˜](#%EF%B8%8F-é…ç½®è¯´æ˜) â€¢ [é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)

</div>

---

<div align="center">

## ğŸ’– æ”¯æŒé¡¹ç›®

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼æ”¯æŒå¼€å‘ï¼š

**[â˜• è¯·æˆ‘å–æ¯å’–å•¡](https://mumuverse.space:1588/)**

### ğŸ èµåŠ©ä¸“å±æƒç›Š

| æƒç›Š | è¯´æ˜ |
|------|------|
| ğŸ“‹ **ä¼˜å…ˆéœ€æ±‚å“åº”** | æ‚¨çš„åŠŸèƒ½éœ€æ±‚å’Œé—®é¢˜åé¦ˆå°†è·å¾—ä¼˜å…ˆå¤„ç† |
| ğŸš€ **Windowsä¸€é”®å¯åŠ¨** | è·å–å…å®‰è£…EXEç¨‹åºï¼ŒåŒå‡»å³å¯ä½¿ç”¨ |
| ğŸ’¬ **ä¸“å±æŠ€æœ¯æ”¯æŒ** | åŠ å…¥èµåŠ©è€…å†…éƒ¨ç¾¤ï¼Œè·å¾—è¿œç¨‹ååŠ©å’Œé…ç½®æŒ‡å¯¼ |

### â˜• èµåŠ©é‡‘é¢

| é‡‘é¢ | æè¿° |
|------|------|
| Â¥5 | ğŸŒ¶ï¸ ä¸€åŒ…è¾£æ¡ |
| Â¥10 | ğŸ± ä¸€é¡¿æ‹¼å¥½é¥­ |
| Â¥20 | ğŸ§‹ ä¸€æ¯å’–å•¡ |
| Â¥50 | ğŸ– ä¸€æ¬¡çƒ§çƒ¤ |
| Â¥99 | ğŸ² ä¸€é¡¿æµ·åº•æ |

æ‚¨çš„æ”¯æŒæ˜¯æˆ‘æŒç»­å¼€å‘çš„åŠ¨åŠ›ï¼ğŸ™

</div>

---

## âœ¨ ç‰¹æ€§

- ğŸ¤– **å¤š AI æ¨¡å‹** - æ”¯æŒ OpenAIã€Geminiã€Claude ç­‰ä¸»æµæ¨¡å‹
- ğŸ“ **æ™ºèƒ½å‘å¯¼** - AI è‡ªåŠ¨ç”Ÿæˆå¤§çº²ã€è§’è‰²å’Œä¸–ç•Œè§‚
- ğŸ‘¥ **è§’è‰²ç®¡ç†** - äººç‰©å…³ç³»ã€ç»„ç»‡æ¶æ„å¯è§†åŒ–ç®¡ç†
- ğŸ“– **ç« èŠ‚ç¼–è¾‘** - æ”¯æŒåˆ›å»ºã€ç¼–è¾‘ã€é‡æ–°ç”Ÿæˆå’Œæ¶¦è‰²
- ğŸŒ **ä¸–ç•Œè§‚è®¾å®š** - æ„å»ºå®Œæ•´çš„æ•…äº‹èƒŒæ™¯
- ğŸ” **å¤šç§ç™»å½•** - LinuxDO OAuth æˆ–æœ¬åœ°è´¦æˆ·ç™»å½•
- ğŸ’¾ **PostgreSQL** - ç”Ÿäº§çº§æ•°æ®åº“ï¼Œå¤šç”¨æˆ·æ•°æ®éš”ç¦»
- ğŸ³ **Docker éƒ¨ç½²** - ä¸€é”®å¯åŠ¨ï¼Œå¼€ç®±å³ç”¨

## ğŸ“¸ é¡¹ç›®é¢„è§ˆ

<details>

<summary>å¤šå›¾é¢„è­¦</summary>

<div align="center">

### ç™»å½•ç•Œé¢
![ç™»å½•ç•Œé¢](images/1.png)

### ä¸»ç•Œé¢
![ä¸»ç•Œé¢](images/2.png)

### é¡¹ç›®ç®¡ç†
![é¡¹ç›®ç®¡ç†](images/3.png)

### èµåŠ©æˆ‘ ğŸ’–
![èµåŠ©æˆ‘](images/4.png)

</div>

</details>

## ğŸ“‹ TODO List

### âœ… å·²å®ŒæˆåŠŸèƒ½

- [x] **çµæ„Ÿæ¨¡å¼** - åˆ›ä½œçµæ„Ÿå’Œç‚¹å­ç”Ÿæˆ
- [x] **è‡ªå®šä¹‰å†™ä½œé£æ ¼** - æ”¯æŒè‡ªå®šä¹‰ AI å†™ä½œé£æ ¼
- [x] **æ•°æ®å¯¼å…¥å¯¼å‡º** - é¡¹ç›®æ•°æ®çš„å¯¼å…¥å¯¼å‡º
- [x] **Prompt è°ƒæ•´ç•Œé¢** - å¯è§†åŒ–ç¼–è¾‘ Prompt æ¨¡æ¿
- [x] **ç« èŠ‚å­—æ•°é™åˆ¶** - ç”¨æˆ·å¯è®¾ç½®ç”Ÿæˆå­—æ•°
- [x] **æ€ç»´é“¾ä¸ç« èŠ‚å…³ç³»å›¾è°±** - å¯è§†åŒ–ç« èŠ‚é€»è¾‘å…³ç³»
- [x] **æ ¹æ®åˆ†æä¸€é”®é‡å†™** - æ ¹æ®åˆ†æå»ºè®®é‡æ–°ç”Ÿæˆ
- [x] **Linux DO è‡ªåŠ¨åˆ›å»ºè´¦å·** - OAuth ç™»å½•è‡ªåŠ¨ç”Ÿæˆè´¦å·
- [x] **èŒä¸šç­‰çº§ä½“ç³»** - è‡ªå®šä¹‰èŒä¸šå’Œç­‰çº§ç³»ç»Ÿï¼Œæ”¯æŒä¿®ä»™å¢ƒç•Œã€é­”æ³•ç­‰çº§ç­‰å¤šç§ä½“ç³»
- [x] **è§’è‰²/ç»„ç»‡å¡ç‰‡å¯¼å…¥å¯¼å‡º** - å•ç‹¬å¯¼å‡ºè§’è‰²å’Œç»„ç»‡å¡ç‰‡ï¼Œæ”¯æŒè·¨é¡¹ç›®æ•°æ®å…±äº«

### ğŸ“ è§„åˆ’ä¸­åŠŸèƒ½

- [ ] **ä¼ç¬”ç®¡ç†** - æ™ºèƒ½è¿½è¸ªå‰§æƒ…ä¼ç¬”ï¼Œæé†’æœªå›æ”¶çº¿ç´¢ï¼Œå¯è§†åŒ–ä¼ç¬”æ—¶é—´çº¿
- [ ] **æç¤ºè¯å·¥åŠ** - ç¤¾åŒºé©±åŠ¨çš„ Prompt æ¨¡æ¿åˆ†äº«å¹³å°ï¼Œä¸€é”®å¯¼å…¥ä¼˜è´¨æç¤ºè¯

> ğŸ’¡ æ¬¢è¿æäº¤ Issue æˆ– Pull Requestï¼

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Docker å’Œ Docker Compose
- è‡³å°‘ä¸€ä¸ª AI æœåŠ¡çš„ API Keyï¼ˆOpenAI/Gemini/Claudeï¼‰

### Docker Compose éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/xiamuceer-j/MuMuAINovel.git
cd MuMuAINovel

# 2. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¿…éœ€ï¼‰
cp backend/.env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥å¿…è¦é…ç½®ï¼ˆAPI Keyã€æ•°æ®åº“å¯†ç ç­‰ï¼‰

# 3. ç¡®ä¿æ–‡ä»¶å‡†å¤‡å®Œæ•´
# âš ï¸ é‡è¦ï¼šç¡®ä¿ä»¥ä¸‹æ–‡ä»¶å­˜åœ¨
# - .envï¼ˆé…ç½®æ–‡ä»¶ï¼Œå¿…éœ€æŒ‚è½½åˆ°å®¹å™¨ï¼‰
# - backend/scripts/init_postgres.sqlï¼ˆæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ï¼‰

# 4. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 5. è®¿é—®åº”ç”¨
# æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:8000
```

> **ğŸ’¡ å‘½ä»¤æç¤º**ï¼šå¦‚æœä½ çš„ç¯å¢ƒæ˜¯ Docker Desktop / Compose v2ï¼Œæ¨èä½¿ç”¨ `docker compose up -d`ï¼ˆä¸­é—´æœ‰ç©ºæ ¼ï¼‰ã€‚æœ¬æ–‡ä¸­å‡ºç°çš„ `docker-compose` é€šå¸¸éƒ½å¯ä»¥ç­‰ä»·æ›¿æ¢ä¸º `docker compose`ã€‚

> **ğŸ“Œ æ³¨æ„äº‹é¡¹**
>
> 1. **`.env` æ–‡ä»¶æŒ‚è½½**: `docker-compose.yml` ä¼šè‡ªåŠ¨å°† `.env` æŒ‚è½½åˆ°å®¹å™¨ï¼Œç¡®ä¿æ–‡ä»¶å­˜åœ¨
> 2. **æ•°æ®åº“åˆå§‹åŒ–**: `init_postgres.sql` ä¼šåœ¨é¦–æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨æ‰§è¡Œï¼Œå®‰è£…å¿…è¦çš„PostgreSQLæ‰©å±•
> 3. **è‡ªè¡Œæ„å»º**: å¦‚éœ€ä»æºç æ„å»ºï¼Œè¯·å…ˆä¸‹è½½ embedding æ¨¡å‹æ–‡ä»¶ï¼ˆ[åŠ ç¾¤è·å–](frontend/public/qq.jpg)ï¼‰

### ä½¿ç”¨ Docker Hub é•œåƒï¼ˆæ¨èæ–°æ‰‹ï¼‰

è¿™ä¸€å¥—æ­¥éª¤åœ¨ **Windows / macOS / Linux æœ¬è´¨æ²¡æœ‰åŒºåˆ«**ï¼šä½ éœ€è¦åœ¨è‡ªå·±ç”µè„‘ä¸Šå‡†å¤‡ä¸€ä¸ªâ€œå·¥ä½œæ–‡ä»¶å¤¹â€ï¼ŒæŠŠ `docker-compose.yml` å’Œ `.env` æ”¾è¿›å»ï¼›Docker è´Ÿè´£åœ¨åå°æ‹‰å–é•œåƒå¹¶å¯åŠ¨å®¹å™¨ã€‚

å…ˆæŠŠä¸‹é¢å‡ ä¸ªæ¦‚å¿µè®°ä½ï¼ˆéå¸¸å…³é”®ï¼‰ï¼š

- **å®¹å™¨**ï¼šåº”ç”¨è¿è¡Œçš„â€œä¸´æ—¶ç¯å¢ƒâ€ï¼Œåˆ æ‰/é‡å»ºéƒ½å¾ˆå¸¸è§ã€‚
- **æŒä¹…åŒ–æ•°æ®**ï¼šä½ å¸Œæœ›â€œé‡å¯/æ›´æ–°åä»ç„¶å­˜åœ¨â€çš„å†…å®¹ã€‚
  - `postgres_data`ï¼šæ•°æ®åº“æ•°æ®ï¼ˆDocker volumeï¼Œä¼šæŒä¹…åŒ–ä¿å­˜ï¼‰
  - `./logs`ï¼šæ—¥å¿—æ–‡ä»¶ï¼ˆæŒ‚è½½åˆ°ä½ ç”µè„‘çš„æ–‡ä»¶å¤¹ï¼Œä¼šæŒä¹…åŒ–ä¿å­˜ï¼‰
  - `./.env`ï¼šä½ çš„é…ç½®ï¼ˆåœ¨ä½ ç”µè„‘ä¸Šç¼–è¾‘ï¼›åŒæ—¶ä¼šæŒ‚è½½è¿›å®¹å™¨ä¾›ç¨‹åºè¯»å–ï¼‰

#### 1ï¼‰åœ¨ç”µè„‘ä¸Šå‡†å¤‡ä¸€ä¸ªå·¥ä½œæ–‡ä»¶å¤¹ï¼ˆé‡è¦ï¼‰

é€‰æ‹©ä»»æ„ä½ç½®æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä¾‹å¦‚ `mumuainovel-docker`ï¼Œç„¶ååœ¨è¿™ä¸ªæ–‡ä»¶å¤¹å†…å‡†å¤‡è¿™äº›å†…å®¹ï¼š

- `docker-compose.yml`ï¼ˆä¸‹é¢æœ‰å®Œæ•´ç¤ºä¾‹ï¼Œç›´æ¥å¤åˆ¶ï¼‰
- `.env`ï¼ˆé…ç½®æ–‡ä»¶ï¼Œå‚è€ƒbackend\.env.exampleåˆ›å»ºå¹¶å¡«å†™ã€‚ï¼‰
- `logs/`ï¼ˆæ—¥å¿—ç›®å½•ï¼Œç©ºæ–‡ä»¶å¤¹å³å¯ï¼‰

> è¯´æ˜ï¼šä½ åç»­æ‰€æœ‰ `docker compose ...` å‘½ä»¤éƒ½å»ºè®®åœ¨è¿™ä¸ªå·¥ä½œæ–‡ä»¶å¤¹é‡Œæ‰§è¡Œã€‚

#### 2ï¼‰æ‹‰å–é•œåƒ

```bash
# 1. æ‹‰å–æœ€æ–°é•œåƒï¼ˆå·²åŒ…å«æ¨¡å‹æ–‡ä»¶ï¼‰
docker pull mumujie/mumuainovel:latest

# 2. åœ¨å·¥ä½œæ–‡ä»¶å¤¹é‡Œåˆ›å»º docker-compose.ymlï¼ˆç‚¹å‡»ä¸‹æ–¹å±•å¼€æŸ¥çœ‹å®Œæ•´é…ç½®ï¼‰
```

<details>
<summary>ğŸ“„ ç‚¹å‡»å±•å¼€ docker-compose.yml å®Œæ•´é…ç½®</summary>

```yaml
services:
  postgres:
    image: postgres:18-alpine
    container_name: mumuainovel-postgres
    environment:
      POSTGRES_DB: ${POSTGRES_DB:-mumuai_novel}
      POSTGRES_USER: ${POSTGRES_USER:-mumuai}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-123456}
      POSTGRES_INITDB_ARGS: "--encoding=UTF8 --locale=C"
      TZ: ${TZ:-Asia/Shanghai}
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./backend/scripts/init_postgres.sql:/docker-entrypoint-initdb.d/init.sql:ro
    ports:
      - "${POSTGRES_PORT:-5432}:5432"
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U ${POSTGRES_USER:-mumuai} -d ${POSTGRES_DB:-mumuai_novel}"]
      interval: 10s
      timeout: 5s
      retries: 5
      start_period: 10s
    networks:
      - ai-story-network
    command:
      - postgres
      - -c
      - max_connections=${POSTGRES_MAX_CONNECTIONS:-200}
      - -c
      - shared_buffers=${POSTGRES_SHARED_BUFFERS:-256MB}
      - -c
      - effective_cache_size=${POSTGRES_EFFECTIVE_CACHE_SIZE:-1GB}
      - -c
      - maintenance_work_mem=${POSTGRES_MAINTENANCE_WORK_MEM:-64MB}
      - -c
      - checkpoint_completion_target=${POSTGRES_CHECKPOINT_COMPLETION_TARGET:-0.9}
      - -c
      - wal_buffers=${POSTGRES_WAL_BUFFERS:-16MB}
      - -c
      - default_statistics_target=${POSTGRES_DEFAULT_STATISTICS_TARGET:-100}
      - -c
      - random_page_cost=${POSTGRES_RANDOM_PAGE_COST:-1.1}
      - -c
      - effective_io_concurrency=${POSTGRES_EFFECTIVE_IO_CONCURRENCY:-200}
      - -c
      - work_mem=${POSTGRES_WORK_MEM:-4MB}
      - -c
      - min_wal_size=${POSTGRES_MIN_WAL_SIZE:-1GB}
      - -c
      - max_wal_size=${POSTGRES_MAX_WAL_SIZE:-4GB}

  mumuainovel:
    image: mumujie/mumuainovel:latest
    container_name: mumuainovel
    depends_on:
      postgres:
        condition: service_healthy
    ports:
      - "${APP_PORT:-8000}:8000"
    volumes:
      - ./logs:/app/logs
      - ./.env:/app/.env:ro
    environment:
      # åº”ç”¨é…ç½®
      - APP_NAME=${APP_NAME:-MuMuAINovel}
      - APP_VERSION=${APP_VERSION:-1.0.0}
      - APP_HOST=${APP_HOST:-0.0.0.0}
      - APP_PORT=8000
      - DEBUG=${DEBUG:-false}
      # æ•°æ®åº“é…ç½®
      - DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER:-mumuai}:${POSTGRES_PASSWORD:-123456}@postgres:5432/${POSTGRES_DB:-mumuai_novel}
      - DB_HOST=postgres
      - DB_PORT=5432
      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD:-123456}
      # PostgreSQL è¿æ¥æ± é…ç½®
      - DATABASE_POOL_SIZE=${DATABASE_POOL_SIZE:-30}
      - DATABASE_MAX_OVERFLOW=${DATABASE_MAX_OVERFLOW:-20}
      - DATABASE_POOL_TIMEOUT=${DATABASE_POOL_TIMEOUT:-60}
      - DATABASE_POOL_RECYCLE=${DATABASE_POOL_RECYCLE:-1800}
      - DATABASE_POOL_PRE_PING=${DATABASE_POOL_PRE_PING:-True}
      - DATABASE_POOL_USE_LIFO=${DATABASE_POOL_USE_LIFO:-True}
      # ä»£ç†é…ç½®ï¼ˆå¯é€‰ï¼‰
      - HTTP_PROXY=${HTTP_PROXY:-}
      - HTTPS_PROXY=${HTTPS_PROXY:-}
      - NO_PROXY=${NO_PROXY:-localhost,127.0.0.1}
      # AI æœåŠ¡é…ç½®
      - OPENAI_API_KEY=${OPENAI_API_KEY:-}
      - OPENAI_BASE_URL=${OPENAI_BASE_URL:-https://api.openai.com/v1}
      - GEMINI_API_KEY=${GEMINI_API_KEY:-}
      - GEMINI_BASE_URL=${GEMINI_BASE_URL:-}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY:-}
      - ANTHROPIC_BASE_URL=${ANTHROPIC_BASE_URL:-}
      - DEFAULT_AI_PROVIDER=${DEFAULT_AI_PROVIDER:-openai}
      - DEFAULT_MODEL=${DEFAULT_MODEL:-gpt-4o-mini}
      - DEFAULT_TEMPERATURE=${DEFAULT_TEMPERATURE:-0.7}
      - DEFAULT_MAX_TOKENS=${DEFAULT_MAX_TOKENS:-32000}
      # LinuxDO OAuth é…ç½®
      - LINUXDO_CLIENT_ID=${LINUXDO_CLIENT_ID:-11111}
      - LINUXDO_CLIENT_SECRET=${LINUXDO_CLIENT_SECRET:-11111}
      - LINUXDO_REDIRECT_URI=${LINUXDO_REDIRECT_URI:-http://localhost:8000/api/auth/linuxdo/callback}
      - FRONTEND_URL=${FRONTEND_URL:-http://localhost:8000}
      # æœ¬åœ°è´¦æˆ·ç™»å½•é…ç½®
      - LOCAL_AUTH_ENABLED=${LOCAL_AUTH_ENABLED:-true}
      - LOCAL_AUTH_USERNAME=${LOCAL_AUTH_USERNAME:-admin}
      - LOCAL_AUTH_PASSWORD=${LOCAL_AUTH_PASSWORD:-admin123}
      - LOCAL_AUTH_DISPLAY_NAME=${LOCAL_AUTH_DISPLAY_NAME:-æœ¬åœ°ç®¡ç†å‘˜}
      # ä¼šè¯é…ç½®
      - SESSION_EXPIRE_MINUTES=${SESSION_EXPIRE_MINUTES:-120}
      - SESSION_REFRESH_THRESHOLD_MINUTES=${SESSION_REFRESH_THRESHOLD_MINUTES:-30}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "python", "-c", "import urllib.request; urllib.request.urlopen('http://localhost:8000/health')"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 30s
    networks:
      - ai-story-network

volumes:
  postgres_data:
    driver: local

networks:
  ai-story-network:
    driver: bridge
```

</details>

> **å…³äº `init_postgres.sql`ï¼ˆå°ç™½å¿…çœ‹ï¼‰**
>
> ä¸Šé¢çš„ compose é‡Œæœ‰ä¸€è¡ŒæŒ‚è½½ï¼š`./backend/scripts/init_postgres.sql:/docker-entrypoint-initdb.d/init.sql:ro`ã€‚
>
> è¿™è¡¨ç¤ºï¼šä½ ç”µè„‘ä¸Šçš„å·¥ä½œæ–‡ä»¶å¤¹é‡Œï¼Œå¿…é¡»å­˜åœ¨ `backend/scripts/init_postgres.sql` è¿™ä¸ªæ–‡ä»¶ã€‚
>
> - å¦‚æœä½ æ˜¯ä» Git å…‹éš†äº†ä»“åº“å¹¶åœ¨ä»“åº“æ ¹ç›®å½•æ‰§è¡Œ composeï¼šè¿™ä¸ªæ–‡ä»¶é€šå¸¸å·²ç»å­˜åœ¨ã€‚
> - å¦‚æœä½ åªæƒ³â€œçº¯ç”¨é•œåƒä¸å…‹éš†ä»£ç â€ï¼šä¹Ÿå¯ä»¥åœ¨å·¥ä½œæ–‡ä»¶å¤¹é‡Œæ‰‹åŠ¨åˆ›å»º `backend/scripts/` ç›®å½•ï¼Œå¹¶æŠŠä»“åº“é‡Œçš„ `backend/scripts/init_postgres.sql` ä¸‹è½½/å¤åˆ¶è¿›å»ã€‚
>
> è¯¥è„šæœ¬åªåœ¨ **é¦–æ¬¡åˆå§‹åŒ–æ•°æ®åº“** æ—¶èµ·ä½œç”¨ï¼›åç»­æ›´æ–°é•œåƒé€šå¸¸ä¸éœ€è¦é‡å¤å¤„ç†ã€‚

```bash
# 3. å¯åŠ¨æœåŠ¡ï¼ˆåœ¨å·¥ä½œæ–‡ä»¶å¤¹ä¸­æ‰§è¡Œï¼‰
docker compose up -d

# 4. æŸ¥çœ‹æ—¥å¿—
docker compose logs -f

# 5. æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼ˆå¸¸ç”¨äºâ€œå¡åœ¨æ›´æ–°ç‰ˆæœ¬/è¦å‡çº§â€çš„æƒ…å†µï¼‰
docker compose pull
docker compose up -d
```

> **ğŸ’¡ æç¤º**
>
> - Docker Hub é•œåƒå·²åŒ…å«æ‰€æœ‰ä¾èµ–å’Œæ¨¡å‹æ–‡ä»¶ï¼Œæ— éœ€é¢å¤–ä¸‹è½½ã€‚
> - æƒ³ä¿ç•™æ•°æ®ï¼šè¯·ä¼˜å…ˆç”¨ `docker compose down` åœæ­¢æœåŠ¡ï¼Œä¸è¦éšæ„åˆ é™¤ `postgres_data` volumeã€‚
>   - `docker compose down`ï¼šåªåœå®¹å™¨ï¼Œæ•°æ®è¿˜åœ¨ã€‚
>   - `docker compose down -v`ï¼šä¼šè¿æ•°æ®åº“æ•°æ®ä¸€èµ·åˆ æ‰ï¼ˆæ…ç”¨ï¼‰ã€‚

### æœ¬åœ°å¼€å‘ / ä»æºç æ„å»º

#### å‰ç½®å‡†å¤‡

```bash
# âš ï¸ é‡è¦ï¼šå¦‚æœä»æºç æ„å»ºï¼Œéœ€è¦å…ˆä¸‹è½½ embedding æ¨¡å‹æ–‡ä»¶
# æ¨¡å‹æ–‡ä»¶è¾ƒå¤§ï¼ˆçº¦ 400MBï¼‰ï¼Œéœ€æ”¾ç½®åˆ°ä»¥ä¸‹ç›®å½•ï¼š
# backend/embedding/models--sentence-transformers--paraphrase-multilingual-MiniLM-L12-v2/
#
# ğŸ“¥ è·å–æ–¹å¼ï¼š
# - åŠ å…¥é¡¹ç›® QQ ç¾¤æˆ– Linux DO è®¨è®ºåŒºè·å–ä¸‹è½½é“¾æ¥
# - ç¾¤å·ï¼šè§é¡¹ç›®ä¸»é¡µ
# - Linux DOï¼šhttps://linux.do/t/topic/1100112
```

#### åç«¯

```bash
cd backend
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -r requirements.txt

# é…ç½® .env æ–‡ä»¶
cp .env.example .env
# ç¼–è¾‘ .env å¡«å…¥å¿…è¦é…ç½®

# å¯åŠ¨ PostgreSQLï¼ˆå¯ä½¿ç”¨ Dockerï¼‰
docker run -d --name postgres \
  -e POSTGRES_PASSWORD=your_password \
  -e POSTGRES_DB=mumuai_novel \
  -p 5432:5432 \
  postgres:18-alpine

# å¯åŠ¨åç«¯
python -m uvicorn app.main:app --host localhost --port 8000 --reload
```

#### å‰ç«¯

```bash
cd frontend
npm install
npm run dev  # å¼€å‘æ¨¡å¼
npm run build  # ç”Ÿäº§æ„å»º
```

## âš™ï¸ é…ç½®è¯´æ˜

### å¿…éœ€é…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# PostgreSQL æ•°æ®åº“ï¼ˆå¿…éœ€ï¼‰
DATABASE_URL=postgresql+asyncpg://mumuai:your_password@postgres:5432/mumuai_novel
POSTGRES_PASSWORD=your_secure_password

# AI æœåŠ¡
OPENAI_API_KEY=your_openai_key
OPENAI_BASE_URL=https://api.openai.com/v1
DEFAULT_AI_PROVIDER=openai
DEFAULT_MODEL=gpt-4o-mini

# æœ¬åœ°è´¦æˆ·ç™»å½•
LOCAL_AUTH_ENABLED=true
LOCAL_AUTH_USERNAME=admin
LOCAL_AUTH_PASSWORD=your_password
```

### å¯é€‰é…ç½®

```bash
# LinuxDO OAuth
LINUXDO_CLIENT_ID=your_client_id
LINUXDO_CLIENT_SECRET=your_client_secret
LINUXDO_REDIRECT_URI=http://localhost:8000/api/auth/callback

# PostgreSQL è¿æ¥æ± ï¼ˆé«˜å¹¶å‘ä¼˜åŒ–ï¼‰
DATABASE_POOL_SIZE=30
DATABASE_MAX_OVERFLOW=20
```

### ä¸­è½¬ API é…ç½®

æ”¯æŒæ‰€æœ‰ OpenAI å…¼å®¹æ ¼å¼çš„ä¸­è½¬æœåŠ¡ï¼š

```bash
# New API ç¤ºä¾‹
OPENAI_API_KEY=sk-xxxxxxxx
OPENAI_BASE_URL=https://api.new-api.com/v1

# å…¶ä»–ä¸­è½¬æœåŠ¡
OPENAI_BASE_URL=https://your-proxy-service.com/v1
```

## ğŸ³ Docker éƒ¨ç½²è¯¦æƒ…

### æœåŠ¡æ¶æ„

- **postgres**: PostgreSQL 18 æ•°æ®åº“
  - ç«¯å£: 5432
  - æ•°æ®æŒä¹…åŒ–: `postgres_data` volume
  - åˆå§‹åŒ–è„šæœ¬: `backend/scripts/init_postgres.sql`ï¼ˆè‡ªåŠ¨æŒ‚è½½ï¼‰
  - ä¼˜åŒ–é…ç½®: æ”¯æŒ 80-150 å¹¶å‘ç”¨æˆ·

- **mumuainovel**: ä¸»åº”ç”¨æœåŠ¡
  - ç«¯å£: 8000
  - æ—¥å¿—ç›®å½•: `./logs`
  - é…ç½®æŒ‚è½½: `.env` æ–‡ä»¶
  - è‡ªåŠ¨ç­‰å¾…æ•°æ®åº“å°±ç»ª
  - å¥åº·æ£€æŸ¥: æ¯ 30 ç§’æ£€æµ‹ä¸€æ¬¡

### é‡è¦æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | è¯´æ˜ | æ˜¯å¦å¿…éœ€ |
|------|------|---------|
| `.env` | ç¯å¢ƒé…ç½®ï¼ˆAPI Keyã€æ•°æ®åº“å¯†ç ç­‰ï¼‰ | âœ… å¿…éœ€ |
| `docker-compose.yml` | æœåŠ¡ç¼–æ’é…ç½® | âœ… å¿…éœ€ |
| `backend/scripts/init_postgres.sql` | PostgreSQL æ‰©å±•å®‰è£…è„šæœ¬ | âœ… è‡ªåŠ¨æŒ‚è½½ |
| `backend/embedding/models--*/` | Embedding æ¨¡å‹æ–‡ä»¶ | âš ï¸ è‡ªå»ºéœ€è¦ |

> **æ³¨æ„**: ä½¿ç”¨ Docker Hub é•œåƒæ—¶ï¼Œæ¨¡å‹æ–‡ä»¶å·²åŒ…å«åœ¨é•œåƒä¸­ï¼Œæ— éœ€é¢å¤–ä¸‹è½½

### å¸¸ç”¨å‘½ä»¤

#### `docker compose` ä¸ `docker-compose` çš„åŒºåˆ«

- `docker compose`ï¼šDocker Compose v2ï¼ˆæ¨èï¼‰ã€‚å®ƒæ˜¯ Docker CLI çš„å­å‘½ä»¤ï¼ˆæ’ä»¶å½¢å¼ï¼‰ï¼Œé€šå¸¸éš Docker Desktop ä¸€èµ·å®‰è£…ä¸æ›´æ–°ã€‚
- `docker-compose`ï¼šDocker Compose v1ï¼ˆå†å²/å…¼å®¹ï¼‰ã€‚å®ƒæ˜¯ç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¾ˆå¤šæ—§æ•™ç¨‹ä»åœ¨ä½¿ç”¨ã€‚

ä¸¤è€…ç”¨é€”åŸºæœ¬ä¸€è‡´ï¼šéƒ½è¯»å– `docker-compose.yml`ï¼ˆä»¥åŠ `.env`ï¼‰æ¥ç¼–æ’å®¹å™¨ã€‚è‹¥ä½ çš„æœºå™¨ä¸Šä¸¤è€…éƒ½å¯ç”¨ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨ `docker compose`ã€‚

```bash
# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down

# é‡å¯æœåŠ¡
docker-compose restart

# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats
```

#### Windows/éƒ¨åˆ†ç¯å¢ƒï¼šå¯åŠ¨æŠ¥ `exec /app/entrypoint.sh: no such file or directory`

å¦‚æœä½ æ˜¯ä»æºç æ„å»ºé•œåƒ/å®¹å™¨ï¼Œåœ¨ Windows ä¸Šå¯èƒ½ä¼šå› ä¸ºè„šæœ¬è¢«æ£€å‡ºä¸º CRLF æ¢è¡Œï¼Œå¯¼è‡´å®¹å™¨å¯åŠ¨æ—¶æŠ¥ï¼š

```
exec /app/entrypoint.sh: no such file or directory
```

è¿™ç±»æŠ¥é”™å¸¸è§åŸå› æ˜¯ `entrypoint.sh` ç¬¬ä¸€è¡Œ shebang å˜æˆäº† `#!/bin/bash^M`ï¼ˆ`^M` æ¥è‡ª CRLFï¼‰ï¼Œä»è€Œæ‰¾ä¸åˆ°è§£é‡Šå™¨è·¯å¾„ã€‚

**ä¸´æ—¶ç»•è¿‡ï¼ˆä¸æ”¹ä»“åº“ä»£ç ï¼‰**ï¼šç”¨è¦†ç›– entrypoint çš„æ–¹å¼å¯åŠ¨ä¸€æ¬¡æ€§å®¹å™¨ï¼Œåœ¨å®¹å™¨å†…æŠŠ `\r` å»æ‰åå†æ‰§è¡Œè„šæœ¬ã€‚

```bash
# å…ˆåœæ­¢æ—§å®¹å™¨
docker compose down

# ä»¥â€œè¦†ç›– entrypointâ€çš„æ–¹å¼å¯åŠ¨ï¼ˆä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ mumuainovel å®¹å™¨ï¼‰
docker compose run -d --service-ports --name mumuainovel --entrypoint /bin/sh mumuainovel \
  -lc "sed -i 's/\r$//' /app/entrypoint.sh /app/scripts/entrypoint.sh; exec /app/entrypoint.sh"
```

> å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ `docker-compose` å‘½ä»¤ï¼ŒæŠŠä¸Šé¢çš„ `docker compose` æ›¿æ¢ä¸º `docker-compose` å³å¯ã€‚

è¯¥ç»•è¿‡åªå¯¹å½“å‰å®¹å™¨ç”Ÿæ•ˆï¼›é‡æ–°æ„å»ºé•œåƒ/é‡æ–°åˆ›å»ºå®¹å™¨åå¯èƒ½ä¼šå¤ç°ã€‚é•¿æœŸä¿®å¤å»ºè®®é€šè¿‡ PR å°†ç›¸å…³ `.sh` æ–‡ä»¶ç»Ÿä¸€ä¸º LF æ¢è¡Œå¹¶åŠ ä»¥çº¦æŸï¼ˆè§ä¸‹æ–¹â€œè´¡çŒ®â€ï¼‰ã€‚

### æ•°æ®æŒä¹…åŒ–

- `./postgres_data` - PostgreSQL æ•°æ®åº“æ–‡ä»¶
- `./logs` - åº”ç”¨æ—¥å¿—æ–‡ä»¶

### ç«¯å£é…ç½®

ä¿®æ”¹ `docker-compose.yml` ä¸­çš„ç«¯å£æ˜ å°„ï¼š

```yaml
ports:
  - "8800:8000"  # å®¿ä¸»æœº:å®¹å™¨
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
MuMuAINovel/
â”œâ”€â”€ backend/                 # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/            # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ models/         # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ middleware/     # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ database.py     # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â””â”€â”€ main.py         # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ scripts/            # å·¥å…·è„šæœ¬
â”‚   â””â”€â”€ requirements.txt    # Python ä¾èµ–
â”œâ”€â”€ frontend/               # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/         # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/    # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/      # API æœåŠ¡
â”‚   â”‚   â””â”€â”€ store/         # çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ docker-compose.yml      # Docker Compose é…ç½®
â”œâ”€â”€ Dockerfile             # Docker é•œåƒæ„å»º
â””â”€â”€ README.md
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

**åç«¯**: FastAPI â€¢ PostgreSQL â€¢ SQLAlchemy â€¢ OpenAI/Claude/Gemini SDK

**å‰ç«¯**: React 18 â€¢ TypeScript â€¢ Ant Design â€¢ Zustand â€¢ Vite

## ğŸ“– ä½¿ç”¨æŒ‡å—

1. **ç™»å½•ç³»ç»Ÿ** - ä½¿ç”¨æœ¬åœ°è´¦æˆ·æˆ– LinuxDO è´¦æˆ·
2. **åˆ›å»ºé¡¹ç›®** - é€‰æ‹©"ä½¿ç”¨å‘å¯¼åˆ›å»º"
3. **AI ç”Ÿæˆ** - è¾“å…¥åŸºæœ¬ä¿¡æ¯ï¼ŒAI è‡ªåŠ¨ç”Ÿæˆå¤§çº²å’Œè§’è‰²
4. **ç¼–è¾‘å®Œå–„** - ç®¡ç†è§’è‰²å…³ç³»ï¼Œç”Ÿæˆå’Œç¼–è¾‘ç« èŠ‚

### API æ–‡æ¡£

- Swagger UI: `http://localhost:8000/docs`
- ReDoc: `http://localhost:8000/redoc`

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤ Pull Request

### è´¡çŒ®è€…

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

<a href="https://github.com/xiamuceer-j/MuMuAINovel/graphs/contributors">
  <img src="https://contrib.rocks/image?repo=xiamuceer-j/MuMuAINovel" />
</a>

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [GNU General Public License v3.0](LICENSE)

**GPL v3 æ„å‘³ç€ï¼š**
- âœ… å¯è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘
- âœ… å¯ç”¨äºå•†ä¸šç›®çš„
- ğŸ“ å¿…é¡»å¼€æºä¿®æ”¹ç‰ˆæœ¬
- ğŸ“ å¿…é¡»ä¿ç•™åŸä½œè€…ç‰ˆæƒ
- ğŸ“ è¡ç”Ÿä½œå“å¿…é¡»ä½¿ç”¨ GPL v3 åè®®

## ğŸ™ è‡´è°¢

- [FastAPI](https://fastapi.tiangolo.com/) - Python Web æ¡†æ¶
- [React](https://react.dev/) - å‰ç«¯æ¡†æ¶
- [Ant Design](https://ant.design/) - UI ç»„ä»¶åº“
- [PostgreSQL](https://www.postgresql.org/) - æ•°æ®åº“

## ğŸ“§ è”ç³»æ–¹å¼

- æäº¤ [Issue](https://github.com/xiamuceer-j/MuMuAINovel/issues)
- Linux DO [è®¨è®º](https://linux.do/t/topic/1106333)
- åŠ å…¥QQç¾¤ [QQç¾¤](frontend/public/qq.jpg)
- åŠ å…¥WXç¾¤ [WXç¾¤](frontend/public/WX.png)

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ï¸ Starï¼**

Made with â¤ï¸

</div>

## Star History

<a href="https://www.star-history.com/#xiamuceer-j/MuMuAINovel&type=date&legend=top-left">
 <picture>
   <source media="(prefers-color-scheme: dark)" srcset="https://api.star-history.com/svg?repos=xiamuceer-j/MuMuAINovel&type=date&theme=dark&legend=top-left" />
   <source media="(prefers-color-scheme: light)" srcset="https://api.star-history.com/svg?repos=xiamuceer-j/MuMuAINovel&type=date&legend=top-left" />
   <img alt="Star History Chart" src="https://api.star-history.com/svg?repos=xiamuceer-j/MuMuAINovel&type=date&legend=top-left" />
 </picture>
</a>

## History

![Alt](https://repobeats.axiom.co/api/embed/ee7141a5f269c64759302e067abe23b46796bafe.svg "Repobeats analytics image")
